<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>End of Day Chill</title>
  <style>
    :root {
      --bg1:#0f1724; --bg2:#1b1640; --bg3:#0a233a;
      --card:#0b1220; --accent:#7c3aed; --muted:#94a3b8; --glass:rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter, system-ui, Arial}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      color:#e6eef8;
      background:linear-gradient(-45deg,var(--bg1),var(--bg2),var(--bg3),#071428);
      background-size:400% 400%;
      animation:bgMove 12s ease infinite;
    }
    @keyframes bgMove {
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .player{
      width:940px;max-width:96%;
      background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border-radius:16px;padding:18px;
      display:grid;grid-template-columns:260px 1fr;gap:18px;
      box-shadow:0 10px 30px rgba(2,6,23,0.6);
      backdrop-filter:blur(10px);
    }
    .left{background:var(--card);border-radius:12px;padding:14px;display:flex;flex-direction:column;align-items:center}
    .cover{
  width:200px;
  height:200px;
  border-radius:12px;
  background:linear-gradient(135deg,#0e1b2b,#102232);
  display:flex;
  align-items:center;     
  justify-content:center;
  color:var(--muted);
  font-weight:700;
  font-size:40px;
  transition:box-shadow .3s;
}

    .meta{margin-top:12px;text-align:center}
    .meta h3{margin:6px 0 0;font-size:16px}
    .meta p{margin:4px 0 0;color:var(--muted);font-size:13px}
    .playlist{margin-top:14px;width:100%;overflow:auto;max-height:260px;padding:6px;border-radius:8px;background:var(--glass)}
    .track{padding:8px 10px;border-radius:8px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:background .2s}
    .track:hover{background:rgba(255,255,255,0.04)}
    .track.active{background:linear-gradient(90deg, rgba(124,58,237,0.15), rgba(124,58,237,0.06));outline:1px solid rgba(124,58,237,0.15)}
    .right{display:flex;flex-direction:column;gap:12px}
    .controls{display:flex;align-items:center;gap:12px;justify-content:center}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:10px;color:inherit;cursor:pointer;transition:all .25s ease}
    button:hover{background:rgba(124,58,237,0.2);transform:scale(1.05);box-shadow:0 0 10px rgba(124,58,237,0.4);}
    .big{padding:14px;border-radius:14px;font-size:18px}
    .progress{width:100%;height:10px;background:rgba(255,255,255,0.06);border-radius:999px;cursor:pointer;overflow:hidden}
    .progress>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#60a5fa);border-radius:999px;transition:width .25s}
    .time{display:flex;justify-content:space-between;color:var(--muted);font-size:13px}
    .row{display:flex;gap:10px;align-items:center}
    .playlist-controls{display:flex;gap:8px;align-items:center}
    input[type="file"]{display:none}
    .dropzone{border:2px dashed rgba(255,255,255,0.08);padding:12px;border-radius:10px;text-align:center;color:var(--muted);font-size:13px;transition:0.3s}
    .dropzone:hover{border-color:rgba(124,58,237,0.7);color:#ccc}
    .small{font-size:13px;color:var(--muted)}
    @media(max-width:720px){.player{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="player" id="player">
    <div class="left">
      <div class="cover" id="cover">‚ô™</div>
      <div class="meta">
        <h3 id="title">Kh√¥ng c√≥ b√†i h√°t</h3>
        <p id="artist">Nghe nh·∫°c GitHub ho·∫∑c th√™m c·ªßa b·∫°n</p>
      </div>
      <div class="playlist" id="playlist"></div>
      <div style="width:100%;margin-top:10px">
        <label class="dropzone" id="dropzone">
          K√©o & th·∫£ nh·∫°c v√†o ƒë√¢y ‚Äî ho·∫∑c <button id="addBtn">th√™m</button>
          <input type="file" id="fileInput" accept="audio/*" multiple>
        </label>
        <div style="display:flex;justify-content:space-between;margin-top:8px">
          <div class="small">H·ªó tr·ª£: mp3, wav, m4a, ogg</div>
          <div class="playlist-controls">
            <button id="shuffleBtn" title="B·∫≠t/t·∫Øt shuffle">üîÄ</button>
            <button id="repeatBtn" title="L·∫∑p 1/All/Off">üîÅ</button>
          </div>
        </div>
      </div>
    </div>
    <div class="right">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="small">Web Music Player</div>
        <div class="small">Ph√≠m: Space = Play/Pause</div>
      </div>
      <div class="controls">
        <button id="prevBtn">‚èÆ</button>
        <button id="playBtn" class="big">‚ñ∂Ô∏è</button>
        <button id="nextBtn">‚è≠</button>
        <button id="stopBtn">‚èπ</button>
      </div>
      <div>
        <div class="progress" id="progress"><i></i></div>
        <div class="time"><span id="curTime">0:00</span><span id="durTime">0:00</span></div>
      </div>
      <div style="display:flex;gap:10px;align-items:center;justify-content:space-between">
        <div class="row">
          <label class="small">√Çm l∆∞·ª£ng</label>
          <input type="range" id="volume" min="0" max="1" step="0.01" value="0.9">
        </div>
        <div class="row">
          <button id="downloadBtn" title="T·∫£i b√†i hi·ªán t·∫°i">‚¨áÔ∏è</button>
        </div>
      </div>
      <div style="flex:1;display:flex;align-items:center;justify-content:center;color:var(--muted)">
        <div class="small">ƒê∆∞·ª£c l√†m b·ªüi banglegen ‚ú®</div>
      </div>
    </div>
  </div>

  <audio id="audio"></audio>

  <script>
    const audio = document.getElementById('audio'),
      playBtn = document.getElementById('playBtn'),
      prevBtn = document.getElementById('prevBtn'),
      nextBtn = document.getElementById('nextBtn'),
      stopBtn = document.getElementById('stopBtn'),
      playlistEl = document.getElementById('playlist'),
      titleEl = document.getElementById('title'),
      artistEl = document.getElementById('artist'),
      coverEl = document.getElementById('cover'),
      progress = document.getElementById('progress'),
      progressBar = progress.querySelector('i'),
      curTime = document.getElementById('curTime'),
      durTime = document.getElementById('durTime'),
      fileInput = document.getElementById('fileInput'),
      addBtn = document.getElementById('addBtn'),
      dropzone = document.getElementById('dropzone'), 
      volume = document.getElementById('volume'),
      shuffleBtn = document.getElementById('shuffleBtn'),
      repeatBtn = document.getElementById('repeatBtn'),
      downloadBtn = document.getElementById('downloadBtn');

    let tracks = [
      {
        name: "Th√°p R∆°i T·ª± Do",
        artist: "Ë∑≥Ê•ºÊú∫",
        url: "Music/Th√°p R∆°i T·ª± Do.mp3"
      },
      {
        name: "Phim Ba Ng∆∞·ªùi",
        artist: "Nguy·ªÖn Vƒ© X Cao Tri",
        url: "Music/Phim Ba Ng∆∞·ªùi.mp3"
      },
      {
        name: "N·∫Øng D∆∞·ªõi Ch√¢n M√¢y",
        artist: "Nguy·ªÖn H·ªØu Kha (Style Huy PT Remix)",
        url: "Music/N·∫Øng D∆∞·ªõi Ch√¢n M√¢y.mp3"
      },
      {
        name: "Sao M√¨nh Ch∆∞a N·∫Øm Tay Nhau",
        artist: "Yan Nguy·ªÖn X BD Media Music",
        url: "Music/Sao M√¨nh Ch∆∞a N·∫Øm Tay Nhau.mp3"
      },
      {
        name: "M·ªôt B∆∞·ªõc Y√™u V·∫°n D·∫∑m ƒêau",
        artist: "Mr Siro X Theron Remix",
        url: "Music/M·ªôt B∆∞·ªõc Y√™u V·∫°n D·∫∑m ƒêau.mp3" 
      },
      {
        name: "Ng√†y Mai Em ƒêi M·∫•t",
        artist: "ƒê·∫°t G",
        url: "Music/Ng√†y Mai Em ƒêi M·∫•t.mp3" 
      },
      {
        name: "Anh vui",
        artist: "Ph·∫°m K·ª≥ x CaoTri",
        url: "Music/Anh Vui.mp3"
      },
      {
        name: "M·∫°nh B√†",
        artist: "Linh H∆∞∆°ng Luz, Finn T x CaoTri",
        url: "Music/M·∫°nh B√†.mp3"
      },
      {
        name: "C∆° H·ªôi Cu·ªëi",
        artist: "An V≈© x Freak D",
        url: "Music/C∆° H·ªôi Cu·ªëi.mp3"
      }, 
      {
        name: "Ch·∫°nh L√≤ng Th∆∞∆°ng C√¥ 2",
        artist: "Huy V·∫°c X HHD Lofi Chill Mix ",
        url: "Music/Ch·∫°nh L√≤ng Th∆∞∆°ng C√¥ 2.mp3"
      },
      {
        name: "ƒê·∫•ng Nam Nhi",
        artist: "Th√°i H·ªçc X Hido remix",
        url: "Music/ƒê·∫•ng Nam Nhi.mp3"
      },
      {
        name: "Anh ƒêau T·ª´ L√∫c Em ƒêi",
        artist: "Tr·∫ßn M·∫°nh C∆∞·ªùng X Duzme Remix",
        url: "Music/Anh ƒêau T·ª´ L√∫c Em ƒêi.mp3"
      }
    ];
    let idx = 0, isShuffled = false, repeatMode = 0;

    function formatTime(s){
      if (!isFinite(s)) return '0:00';
      s = Math.floor(s);
      const m = Math.floor(s/60);
      const sec = s % 60;
      return m + ':' + (sec < 10 ? '0' : '') + sec;
    }

    function renderPlaylist(){
      playlistEl.innerHTML = '';
      tracks.forEach((t,i) => {
        const div = document.createElement('div');
        div.className = 'track' + (i === idx ? ' active' : '');
        div.innerHTML = `
          <div style="flex:1;min-width:0">
            <div style="font-weight:600;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${t.name}</div>
            <div style="font-size:12px;color:var(--muted)">${t.artist || ''}</div>
          </div>
          <div style="margin-left:8px;color:var(--muted);font-size:12px">${t.duration || ''}</div>
        `;
        div.onclick = () => playIndex(i);
        playlistEl.appendChild(div);
      });
    }

    function updateMeta(t){
      titleEl.textContent = t.name;
      artistEl.textContent = t.artist || '';
      coverEl.textContent = t.name.charAt(0).toUpperCase();
    }

    function playIndex(i){
      if (i < 0 || i >= tracks.length) return;
      idx = i;
      const t = tracks[idx];
      audio.src = t.url;
      audio.play();
      updateMeta(t);
      renderPlaylist();
      playBtn.textContent = '‚è∏Ô∏è';
    }

    playBtn.onclick = () => {
      if (audio.paused) {
        audio.play();
        playBtn.textContent = '‚è∏Ô∏è';
      } else {
        audio.pause();
        playBtn.textContent = '‚ñ∂Ô∏è';
      }
    };

    prevBtn.onclick = () => {
      if (isShuffled) playIndex(Math.floor(Math.random() * tracks.length));
      else playIndex((idx - 1 + tracks.length) % tracks.length);
    };
    nextBtn.onclick = () => {
      if (isShuffled) playIndex(Math.floor(Math.random() * tracks.length));
      else playIndex((idx + 1) % tracks.length);
    };
    stopBtn.onclick = () => {
      audio.pause();
      audio.currentTime = 0;
      playBtn.textContent = '‚ñ∂Ô∏è';
    };

    audio.ontimeupdate = () => {
      const pct = audio.currentTime / (audio.duration || 1) * 100;
      progressBar.style.width = pct + '%';
      curTime.textContent = formatTime(audio.currentTime);
      durTime.textContent = formatTime(audio.duration);
    };

    progress.onclick = (e) => {
      const rect = progress.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const pct = x / rect.width;
      audio.currentTime = pct * (audio.duration || 0);
    };

    audio.onended = () => {
      if (repeatMode === 2) {
        audio.currentTime = 0;
        audio.play();
      } else if (isShuffled) {
        playIndex(Math.floor(Math.random() * tracks.length));
      } else if (idx < tracks.length - 1) {
        playIndex(idx + 1);
      } else if (repeatMode === 1) {
        playIndex(0);
      } else {
        playBtn.textContent = '‚ñ∂Ô∏è';
      }
    };

    addBtn.onclick = () => fileInput.click();
    fileInput.onchange = (e) => {
      handleFiles(e.target.files);
      fileInput.value = '';
    };

    async function handleFiles(fileList){
      const arr = Array.from(fileList).filter(f => f.type.startsWith('audio'));
      for (const f of arr){
        const url = URL.createObjectURL(f);
        const name = f.name.replace(/\.[^/.]+$/, '');
        tracks.push({ name, url, file: f });
      }
      renderPlaylist();
    }

    ['dragenter','dragover'].forEach(ev => dropzone.addEventListener(ev, e => {
      e.preventDefault(); dropzone.style.borderColor = 'rgba(124,58,237,0.7)';
    }));
    ['dragleave','drop'].forEach(ev => dropzone.addEventListener(ev, e => {
      e.preventDefault(); dropzone.style.borderColor = '';
    }));
    dropzone.addEventListener('drop', e => {
      const dt = e.dataTransfer;
      if (dt && dt.files) handleFiles(dt.files);
    });

    volume.oninput = () => audio.volume = parseFloat(volume.value);
    shuffleBtn.onclick = () => {
      isShuffled = !isShuffled;
      shuffleBtn.style.opacity = isShuffled ? 1 : 0.6;
    };
    repeatBtn.onclick = () => {
      repeatMode = (repeatMode + 1) % 3;
      repeatBtn.style.opacity = repeatMode ? 1 : 0.6;
      repeatBtn.textContent = repeatMode === 2 ? 'üîÇ' : 'üîÅ';
    };
    downloadBtn.onclick = () => {
      if (idx < 0) return;
      const t = tracks[idx];
      if (!t.url) return;
      const a = document.createElement('a');
      a.href = t.url;
      a.download = (t.name || 'music') + '.mp3';
      a.click();
    };

    window.addEventListener('keydown', e => {
      if (e.code === 'Space') {
        e.preventDefault();
        playBtn.click();
      }
      if (e.code === 'ArrowRight') nextBtn.click();
      if (e.code === 'ArrowLeft') prevBtn.click();
    });

    renderPlaylist();
    playIndex(0);
  </script>
</body>
</html>


